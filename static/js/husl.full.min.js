(function(){var l=function(){};l.cca=function(a,b){var c=a.charCodeAt(b);if(c==c)return c};l.substr=function(a,b,c){if(null==c)c=a.length;else if(0>c)if(0==b)c=a.length+c;else return"";return a.substr(b,c)};var q=function(){};q.parseInt=function(a){var b=parseInt(a,10);0!=b||120!=l.cca(a,1)&&88!=l.cca(a,1)||(b=parseInt(a));return isNaN(b)?null:b};var u=function(){};u.hex=function(a,b){for(var c="";c="0123456789ABCDEF".charAt(a&15)+c,a>>>=4,0<a;);if(null!=b)for(;c.length<b;)c="0"+c;return c};var h=
function(){};h.getPickerGeometry=function(a){a=b.getBounds(a);for(var d=a.length,c=0,m=null,f=null,k=0;k<d;){var g=k++,n=e.distanceLineFromOrigin(a[g]);if(null==f||n<f)f=n,m=g}for(var k=a[m],g=e.angleFromOrigin(e.intersectLineLine(k,{slope:0-1/k.slope,intercept:0})),k=[],t,h=0,r=d-1;h<r;)for(var p=h++,l=p+1;l<d;){var q=l++,n=e.intersectLineLine(a[p],a[q]);t=e.angleFromOrigin(n);k.push({line1:p,line2:q,intersectionPoint:n,intersectionPointAngle:t,relativeAngle:e.normalizeAngle(t-g)})}k.sort(function(a,
b){return a.relativeAngle>b.relativeAngle?1:-1});d=[];g=[];n=[];t=0;for(h=k.length;t<h;)p=k[t++],r=null,p.line1==m?r=p.line2:p.line2==m&&(r=p.line1),null!=r&&(m=r,d.push(a[r]),g.push(p.intersectionPoint),n.push(p.intersectionPointAngle),r=e.distanceFromOrigin(p.intersectionPoint),r>c&&(c=r));return{lines:d,vertices:g,angles:n,outerCircleRadius:c,innerCircleRadius:f}};h.closestPoint=function(a,b){for(var c=e.angleFromOrigin(b),d=a.vertices.length,f,k=2*Math.PI,g=0,n=0;n<d;){var h=n++;f=e.normalizeAngle(a.angles[h]-
c);f<k&&(k=f,g=h)}d=(g-1+d)%d;f=a.lines[d];if(e.distanceFromOrigin(b)<e.lengthOfRayUntilIntersect(c,f))return b;c=e.intersectLineLine(f,e.perpendicularThroughPoint(f,b));g=a.vertices[g];f=a.vertices[d];g.x>f.x?(d=g,g=f):d=f;return c.x>d.x?d:c.x<g.x?g:c};var e=function(){};e.intersectLineLine=function(a,b){var c=(a.intercept-b.intercept)/(b.slope-a.slope);return{x:c,y:a.slope*c+a.intercept}};e.distanceFromOrigin=function(a){return Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))};e.distanceLineFromOrigin=
function(a){return Math.abs(a.intercept)/Math.sqrt(Math.pow(a.slope,2)+1)};e.perpendicularThroughPoint=function(a,b){var c=-1/a.slope;return{slope:c,intercept:b.y-c*b.x}};e.angleFromOrigin=function(a){return Math.atan2(a.y,a.x)};e.normalizeAngle=function(a){var b=2*Math.PI;return(a%b+b)%b};e.lengthOfRayUntilIntersect=function(a,b){return b.intercept/(Math.sin(a)-b.slope*Math.cos(a))};var b=function(){};b.getBounds=function(a){for(var d=[],c=Math.pow(a+16,3)/1560896,c=c>b.epsilon?c:a/b.kappa,m=0;3>
m;)for(var f=m++,e=b.m[f][0],g=b.m[f][1],f=b.m[f][2],h=0;2>h;){var l=h++,q=(632260*f-126452*g)*c+126452*l;d.push({slope:(284517*e-94839*f)*c/q,intercept:((838422*f+769860*g+731718*e)*a*c-769860*l*a)/q})}return d};b.maxSafeChromaForL=function(a){a=b.getBounds(a);for(var d=1.7976931348623157E308,c=0;2>c;)d=Math.min(d,e.distanceLineFromOrigin(a[c++]));return d};b.maxChromaForLH=function(a,d){for(var c=d/360*Math.PI*2,m=b.getBounds(a),f=1.7976931348623157E308,k=0;k<m.length;){var g=m[k];++k;g=e.lengthOfRayUntilIntersect(c,
g);0<=g&&(f=Math.min(f,g))}return f};b.dotProduct=function(a,b){for(var c=0,d=0,f=a.length;d<f;)var e=d++,c=c+a[e]*b[e];return c};b.fromLinear=function(a){return.0031308>=a?12.92*a:1.055*Math.pow(a,.4166666666666667)-.055};b.toLinear=function(a){return.04045<a?Math.pow((a+.055)/1.055,2.4):a/12.92};b.xyzToRgb=function(a){return[b.fromLinear(b.dotProduct(b.m[0],a)),b.fromLinear(b.dotProduct(b.m[1],a)),b.fromLinear(b.dotProduct(b.m[2],a))]};b.rgbToXyz=function(a){a=[b.toLinear(a[0]),b.toLinear(a[1]),
b.toLinear(a[2])];return[b.dotProduct(b.minv[0],a),b.dotProduct(b.minv[1],a),b.dotProduct(b.minv[2],a)]};b.yToL=function(a){return a<=b.epsilon?a/b.refY*b.kappa:116*Math.pow(a/b.refY,.3333333333333333)-16};b.lToY=function(a){return 8>=a?b.refY*a/b.kappa:b.refY*Math.pow((a+16)/116,3)};b.xyzToLuv=function(a){var d=a[0],c=a[1];a=d+15*c+3*a[2];var d=4*d,e=9*c;0!=a?(d/=a,e/=a):e=d=NaN;c=b.yToL(c);return 0==c?[0,0,0]:[c,13*c*(d-b.refU),13*c*(e-b.refV)]};b.luvToXyz=function(a){var d=a[0];if(0==d)return[0,
0,0];var c=a[1]/(13*d)+b.refU;a=a[2]/(13*d)+b.refV;d=b.lToY(d);c=0-9*d*c/((c-4)*a-c*a);return[c,d,(9*d-15*a*d-a*c)/(3*a)]};b.luvToLch=function(a){var b=a[0],c=a[1],e=a[2];a=Math.sqrt(c*c+e*e);1E-8>a?c=0:(c=180*Math.atan2(e,c)/3.141592653589793,0>c&&(c=360+c));return[b,a,c]};b.lchToLuv=function(a){var b=a[1],c=a[2]/360*2*Math.PI;return[a[0],Math.cos(c)*b,Math.sin(c)*b]};b.huslToLch=function(a){var d=a[0],c=a[1];a=a[2];return 99.9999999<a?[100,0,d]:1E-8>a?[0,0,d]:[a,b.maxChromaForLH(a,d)/100*c,d]};
b.lchToHusl=function(a){var d=a[0],c=a[2];return 99.9999999<d?[c,0,100]:1E-8>d?[c,0,0]:[c,a[1]/b.maxChromaForLH(d,c)*100,d]};b.huslpToLch=function(a){var d=a[0],c=a[1];a=a[2];return 99.9999999<a?[100,0,d]:1E-8>a?[0,0,d]:[a,b.maxSafeChromaForL(a)/100*c,d]};b.lchToHuslp=function(a){var d=a[0],c=a[2];return 99.9999999<d?[c,0,100]:1E-8>d?[c,0,0]:[c,a[1]/b.maxSafeChromaForL(d)*100,d]};b.rgbToHex=function(a){for(var b="#",c=0,e=a.length;c<e;)b+=u.hex(Math.round(255*a[c++]),2);return b};b.hexToRgb=function(a){a=
a.toUpperCase();return[q.parseInt("0x"+l.substr(a,1,2))/255,q.parseInt("0x"+l.substr(a,3,2))/255,q.parseInt("0x"+l.substr(a,5,2))/255]};b.lchToRgb=function(a){return b.xyzToRgb(b.luvToXyz(b.lchToLuv(a)))};b.rgbToLch=function(a){return b.luvToLch(b.xyzToLuv(b.rgbToXyz(a)))};b.huslToRgb=function(a){return b.lchToRgb(b.huslToLch(a))};b.rgbToHusl=function(a){return b.lchToHusl(b.rgbToLch(a))};b.huslpToRgb=function(a){return b.lchToRgb(b.huslpToLch(a))};b.rgbToHuslp=function(a){return b.lchToHuslp(b.rgbToLch(a))};
b.huslToHex=function(a){return b.rgbToHex(b.huslToRgb(a))};b.huslpToHex=function(a){return b.rgbToHex(b.huslpToRgb(a))};b.hexToHusl=function(a){return b.rgbToHusl(b.hexToRgb(a))};b.hexToHuslp=function(a){return b.rgbToHuslp(b.hexToRgb(a))};b.m=[[3.240969941904521,-1.537383177570093,-.498610760293],[-.96924363628087,1.87596750150772,.041555057407175],[.055630079696993,-.20397695888897,1.056971514242878]];b.minv=[[.41239079926595,.35758433938387,.18048078840183],[.21263900587151,.71516867876775,.072192315360733],
[.019330818715591,.11919477979462,.95053215224966]];b.refY=1;b.refU=.19783000664283;b.refV=.46831999493879;b.kappa=903.2962962;b.epsilon=.0088564516;h={Husl:b,Geometry:e,ColorPicker:h};"undefined"!==typeof jQuery&&(jQuery.husl=h);"undefined"!==typeof module&&(module.exports=h);"undefined"!==typeof define&&define(h);"undefined"!==typeof window&&(window.HUSL=h)})();
